<!doctype html>
<html>
  <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Lecture 2.1 - A bit of Bureaucracy; Data storage & Operations, Pandas</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reset.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reveal.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/theme/white.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/5.11.2/css/font-awesome.min.css">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<link href="https://fonts.googleapis.com/css?family=Questrial" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reveal.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/markdown/markdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/highlight/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/notes/notes.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/math/math.js"></script>



</style>

  <link rel="stylesheet/less" type="text/css" href="/is445_obuobg_spring2025/assets/styles.less" />
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
          <section class="titleslide">
              <h1>Lecture 2.1 - A bit of Bureaucracy; Data storage & Operations, Pandas</h1>
              <h2>Jill Naiman</h2>
              <h2>Data Visualization - Spring 2025</h2>
          </section>
        <section data-markdown
           data-separator="^\n---\n"
           data-separator-vertical="^\n----\n">
          <script type="text/template">
<br>
<br>
<br>

# Bureaucracy, Redux

---

## How to get help

Jill P. Naiman - `jnaiman@illinois.edu`
 * Office Hours: Tuesdays, 10:30am-12pm (online)

TA: Guangchun Zheng  - `gzheng6@illinois.edu`
 * Office Hours: Mondays 8am-10am, Thursdays 4-6pm, Fridays 5-7pm (online)

See [Zoom Meeting Room on Canvas](https://canvas.illinois.edu/courses/52731/external_tools/327) to access meeting links.

 
Other: 
 * Slack, email

---

## Where resources are be located

 * Canvas: https://canvas.illinois.edu/courses/52731 - where the grades and assignments links will be posted
 
 * PrairieLearn: https://us.prairielearn.com/pl/course_instance/170200 - where assignments will be completed

 * Course webpage: https://uiuc-ischool-dataviz.github.io/is445_obuobg_spring2025/ - where lecture slides, notebooks, data & general course info will live.

 * Slack: https://is445obuobgsp-hnm6590.slack.com/ (workspace name is is445-obuobg-spring2025) - the best place to ask questions in a `#homeworkX-questions` channel (or the `#general` channel for general questions)
 
notes:

A few notes about this semester -- while assignments will be posted on Canvas, the actual completion of the assignments will take place on the PrairieLearn platform.  We will discuss this in more detail when we get to looking at homework stuff, but in short these will be "online" cloud notebooks that have all the packages you need already installed so you don't have to install (too many) things on your local machine

Also, we will be utilizing Slack for discussing homeworks with a dedicated channel for each assignment. Again, more on this when we get to looking at the homework (as part of your homework is to say hi on slack!)

---

## Grading

 * 40% Standard "homework" assignments in prose or code form 
 * 25% Lab assignments which allow for "real time" checking of answers and feedback
 * 5% Quizzes on the material covered in class
 * 30% Final project ([teaser trailer \#1](https://jnaiman.github.io/online_cv_public_demo/), [teaser trailer \#2](https://huggingface.co/spaces/jnaiman/my_test_demo))
 
**We will drop the lowest homework score, however there are some assignments we will not drop.**

notes:

part of the syllabus quiz will be checking out the HW policies in more detail -- we will drop the lowest HW score, however there 
are several assignments you must submit and get above a certain grade on to pass the class -- these are installation assignments 
and those that are considered "preparatory" for the final project

---

## Assignment Listings

Current assignment list on PrairieLearn: https://us.prairielearn.com/pl/course_instance/170200
 * caveat - 0% until official "assigned" week (or we are finished testing, see upper-left ? box)

notes:
How to see assignments:
 1. PL list!  Note though the 2 caveats **walk through**
 2. See list of these updates on google doc for an outline

---

## Quick note about quizzes

Make sure you don't start the quiz until you have reviewed the material!  

There is a ~6 hour "time out" for the quiz -- you cannot close and re-open the assignment to submit later.

---

## Strong suggestion: Use the order on PrairieLearn

notes:
so you should do quizzes, then labs, then HWs

---

## Notes on extensions processing

If you request an extension turn in the assignment *after* you receive the confirmation email.

If you request an extension, but turn in the assignment before the original due date, you don't need to worry about this!

notes:
the reason for this is a "feature" of PL in that you need to have the updated due date *before* you submit the assignment, and we need time to process and add these new due dates

if you do submit in this "nebulous window" just resubmit after you get the email, and as always feel free to reach out if questions come up!

---


## Choose your own adventure

There are 3 pathways (that I can see in this course, could be more!)

 1. "I am here to get better at programming and play with viz platforms"
 1. "I am thinking about a career in data viz."
 1. "I don't know/I am new to programming and I want to focus on that."

notes:
just a few reminders if you're in the 3rd track, or any track really!

---

## Choose your own adventure

There are 3 pathways (that I can see in this course, could be more!)

 3. "I don't know/I am new to programming and I want to focus on that."
    * Strategy: 
       * look at the code, focus heavily on Python
       * <span style="color:red">read the prep notebooks before class!</span>
       * do the Javascript parts
       * if you're new to programming, do Javascript parts in class, and build on them for any HW
       * come back to the optional texts/docs after the course is over


---

## Today

<img src="images/data_viz_diagram.png">

notes:

today we're going to get some practice with the practicalities of dealing with data

We'll talk a bit about the kinds of data that are out there and their definitions, and how many people disagree on these definitions!

---

<!-- <img src="https://static.wixstatic.com/media/6efa5f_e6f70adbf18e41fd8e369abc4c309563~mv2.png/v1/fill/w_770,h_434,al_c,lg_1,q_85/Types%20of%20Data_Visual_PNG.webp"> -->

<!-- <img src="https://mldoodles.com/eptoobym/2021/10/Data-Types-in-Machine-Learning-1024x1024.png" width=650>-->

<img src="https://365datascience.com/resources/blog/xzk3rl06exk-data-types.jpeg">

notes:
So, usually you're probably used to thinking about data like this - numerical or quantitative which is then broken down into discrete & continuous.

Also categorical or qualitative data which is either ordered (ordinal) or unordered (nominal).

---

<!-- <img src="https://static.wixstatic.com/media/6efa5f_e6f70adbf18e41fd8e369abc4c309563~mv2.png/v1/fill/w_770,h_434,al_c,lg_1,q_85/Types%20of%20Data_Visual_PNG.webp"> -->

<!-- <img src="https://mldoodles.com/eptoobym/2021/10/Data-Types-in-Machine-Learning-1024x1024.png" width=650>-->

<img src="https://365datascience.com/resources/blog/xzk3rl06exk-data-types.jpeg">


We need to dig a little deeper for data viz.

notes:
This is a fine for something like stats, but we have to start thinking about how data type and format maps itself visually -- what is the best mapping for our visual cortex?

---

## Data organization is important

<div class="left">
	<img src="images/tamaraSlide.png" width=450>
</div>
<div class="right">
    <img src="images/tamaraTables.png" width=350>
	 - Munzner - https://www.cs.ubc.ca/~tmm/talks.html

</div>



notes:
We have to think a little bit about how our data represents reality *and* how it is represented on disk.

for example, both spatial data like that on a map and data that we use to compare salaries for example, are numerical data - we have lat/long and data value combinations for geographic data and numbers for salaries, but there is something fundamentally different about how we would represent these two datasets on a visualization

Similarly for categorical data like with an organization, network, or a tree -- this data is much different than a table of categorical occurrences.

---

## Example: Temporal data is numerical, but its also something "else"

<!-- .slide: class="two-floating-elements" -->

<div class="left">

<img src="https://clauswilke.com/dataviz/aesthetic_mapping_files/figure-html/temp-normals-vs-time-1.png" width="400px">

</div>

<div class="right">

<img src="https://clauswilke.com/dataviz/coordinate_systems_axes_files/figure-html/temperature-normals-polar-1.png" width="400px">

</div>

notes:
temporal data, like here the temperature change in a vew places over time, is numerical, but, depending on what time spans we are interested in, its can also be periodic

The first graph tell us a lot, and the 2nd may at first be a little weird to read but it tells us information about both changes in time and the averages about the place *and* it captures a central nature about this data - that it is periodic

---

<!-- .slide: class="two-floating-elements" -->

## Files, Data, and Organization

* Text
  * ASCII (raw)
  * CSV / TSV
  * JSON
* Binary
  * HDF5
  * PNG/BMP/GIF/JPG/etc
  * Excel
  * Arrow
* Query-based
  * SQL
  * JSON/REST

<div class="right" markdown=1>

<!--![](/is445_obuobg_spring2025/week02/diagrams/row_col.svg)-->
<img src="diagrams/row_col.svg" alt="drawing" width="150"/>

<!--![](diagrams/hdf5pic.png)-->
<img src="images/hdf5pic.png" alt="drawing" width="250"/>

<img src="images/jsonex.png" alt="drawing" width="150"/>

</div>

notes:
We also need to worry a bit about how this data is stored on disk because that will tell us what steps are between us and (1) making the data user-friendly *and* putting into a format that we can make a visualization with

read-write operations from disk are extremely time consuming, so raw text files come with massive overhead

REST = REpresentational State Transfer - web architecture that keeps clients and servers independent and queries using flexible JSON formatting.

---

<!-- .slide: class="two-floating-elements" -->

## Files, Data, and Organization

* Text
  * ASCII (raw)
  * <span style="color:red">CSV / TSV </span>
  * JSON
* Binary
  * HDF5
  * <span style="color:red">PNG/BMP/GIF/JPG/etc</span>
  * Excel
  * Arrow
* Query-based
  * SQL
  * JSON/REST

<div class="right" markdown=1>

<!--![](/is445_obuobg_spring2025/week02/diagrams/row_col.svg)-->
<img src="diagrams/row_col.svg" alt="drawing" width="150"/>

<!--![](diagrams/hdf5pic.png)-->
<img src="images/hdf5pic.png" alt="drawing" width="250"/>

<img src="images/jsonex.png" alt="drawing" width="150"/>

</div>

notes:

Today, we'll be focusing in on CSV files in the programming part of the course, and then next week we'll look at PNG/JPEG/etc kinds of files.

---

## The "simple" pipeline

<!-- .slide: data-background-image="images/viz_diagram.svg.png" data-background-size="contain"-->

notes: what we want is something like this where we have some data, we load it into Python/javascript/whatever and then we make a super cool viz.

---

## The "simple" pipeline... is not so simple

From Elizabeth Wickes' talk: https://zenodo.org/record/3563145#.XjdvdRNKgtc

<img src="images/elliexWickesTalk.png">

notes:
We know that this is not easy though! Especially for "complicated" data like we might run into out in the wild. While most of the data we'll use here will be less messy than "out in the wild" data, we nevertheless need to figure out how to process it a bit.

There are several great examples of this from Elizabeth Wickes' talks linked here, but basically, here she is highlighting all of the places the documentation can "go wrong" if you are trying to follow along with your data.

---

<!-- .slide: data-background-image="images/viz_diagram2.svg.png" data-background-size="contain"-->

notes:
Usually we are going to be able to make use of readers, but in the prep notebook from this week there is an example of how one would construct a data reader "by hand" if you'd like to look that over, just for fun!

---

<br>
<br>
<br>

# Let's consider tabular data

---

## Organization

| | Column 1 | Column 2 | Column 3 | Column 4 |
|-|-|-|-|-|
|Row 1|11|21|31|41|
|Row 2|12|22|32|42|
|Row 3|13|23|33|43|

Internally, this data is stored linearly, with one value immediately following
another.  We can do this in two methods:

||||||||||||||
|:-|-|-|-|-|-|-|-|-|-|-|-|-|
| Row | 11 | 21 | 31 | 41 | 12 | 22 | 32 | 42 | 13 | 23 | 33 | 43 |
| Column | 11 | 12 | 13 | 21 | 22 | 23 | 31 | 32 | 33 | 41 | 42 | 43 |

<!-- .element: class="fragment" -->

---

### Organization: Row

| | | | | | | | | | | |
|-|-|-|-|-|-|-|-|-|-|-|
| 11 <!--.element: class="table-hl" -->| <!--.element: class="table-hl" -->21 | 31 | 41 | 12 | 22 | 32 | 42 | 13 | 23 | 33 | 43 |

In row-oriented storage, successive _fields_ for a single _record_ are
adjacent.

<div style="height: 2.0em;"></div>

### Organization: Column

| | | | | | | | | | | |
|-|-|-|-|-|-|-|-|-|-|-|
| 11 <!--.element: class="table-hl" -->| 12 | 13 | <!-- .element: class="table-hl" --> 21 | 22 | 23 | 31 | 32 | 33 | 41 | 42 | 43 |

In column-oriented storage, successive _records_ for a single _field_ are
adjacent.

notes:
These formats are more efficient when the information you're interested in is adjacent. For instance, operations requiring many rows and only a few columns benefit from row-oriented storage.

---

## CSV (Comma-separated values)

| Column 1 | Column 2 | Column 3 | Column 4 | Column 5 |
|-|-|-|-|-|
| . | . | . | . | . |
| . | . | . | . | . |
| . | . | . | . | . |
| . | . | . | . | . |

<div style="height: 2.0em;"></div>

---

## CSV (Comma-separated values)

![](/is445_obuobg_spring2025/week02/images/automobilesCSV.png)

 * "Lowest-common denominator format" (widest available)
 * Flexible delimiters 
 * Ad hoc comments and headers (data readers need to be adapted)
 * Row-oriented
 * Row-size can vary: no implicit indexing

notes:
Sometimes called "DSV" or "Delimiter-separated values"

Ad hoc means data readers need to be adapted to format.

---

## Reading CSV

```
...
390,1.83970e-003,-4.53930e-004,1.21520e-002
395,4.61530e-003,-1.04640e-003,3.11100e-002
400,9.62640e-003,-2.16890e-003,6.23710e-002
405,1.89790e-002,-4.43040e-003,1.31610e-001
410,3.08030e-002,-7.20480e-003,2.27500e-001
415,4.24590e-002,-1.25790e-002,3.58970e-001
420,5.16620e-002,-1.66510e-002,5.23960e-001
425,5.28370e-002,-2.12400e-002,6.85860e-001
...
```

notes:
Let's take this sample data and see how it's represented in computer memory.

---

```

390,1.83970e-003,-4.53930e-004,1.21520e-002
```

If we assume ASCII encoding, this becomes:

| | | | |
|-|-|-|-|
|"390" <!-- .element: class="table-hl" --> | 51 | 57 | 48 |
<!-- .element: style="margin-left: 0.2em;" -->

![](/is445_obuobg_spring2025/week02/images/ASCII-Table2.jpeg)

notes:
A string is not a number, but a list of characters. A character is a symbol represented by a unique byte as described in the ASCII table.

---

```

390,1.83970e-003,-4.53930e-004,1.21520e-002
```

If we assume ASCII encoding, this becomes:

| | | | |
|-|-|-|-|
|"390" <!-- .element: class="table-hl" --> | 51 | 57 | 48 |
<!-- .element: style="margin-left: 0.2em;" -->

Breaking this further down, we encode each character:

||||||||||
|-|-|-|-|-|-|-|-|-|
|51 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 0 | 0 | 1 | 1 |
|57 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 1 | 0 | 0 | 1 |
|48 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 0 | 0 | 0 | 0 |
<!-- .element: style="margin-left: 0.2em;" -->

---

```

390,1.83970e-003,-4.53930e-004,1.21520e-002
```

If we assume ASCII encoding, this becomes:

| | | | |
|-|-|-|-|
|"390" <!-- .element: class="table-hl" --> | 51 | 57 | 48 |
<!-- .element: style="margin-left: 0.2em;" -->

Breaking this further down, we encode each character:

||||||||||
|-|-|-|-|-|-|-|-|-|
|51 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 0 | 0 | 1 | 1 |
|57 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 1 | 0 | 0 | 1 |
|48 <!-- .element: class="table-hl" --> | 0 | 0 | 1 | 1 | 0 | 0 | 0 | 0 |
<!-- .element: style="margin-left: 0.2em;" -->

**See aside on binary representations at the end of the lecture notes if you are curious!**

---

## A few other representations: JSON

| | | |
|:-|:-|:-|
| Record 1 | Record 2 | Record 3 |

<div style="height: 2.0em;"></div>

 * Row-oriented
 * Potentially-unknown subcomponent sizes (lists of lists)
 * Common response to REST APIs
 * Multiple types
   * String
   * Number
   * Object (JSON)
   * Array (list)
   * Boolean
   * null
 * Format of .ipynb Python Notebooks

notes:
Another way to store tabular-like data is with JSON files.

XML-like syntax for storing data values. 

All fields for a record are presented at once.

REST = REpresentational State Transfer - web architecture that keeps clients and servers independent and queries using flexible JSON formatting.

**take a look at a jupyter notebook!**

---

```
[
 ...
 {"Agency Name":"University of Illinois",
  "Address":"501 E Daniel",
  "City":"Champaign",
  "Zip code":61820,
  "Year Acquired":1992,
  "Year Constructed":1935,
  "Square Footage":21845,
  "Total Floors":5
 }, 
 ...
]
```

<div style="height: 2.0em;"></div>

 * `[` and `]` indicate an array
 * `{` and `}` indicate a JSON object (or mapping)
 * `"` indicates a string
 * Numbers are, well, numbers.

---

## A few other representations: HDF5

| | | |
|:-|:-|:-|
| Column 1 | Column 2 | Column 3 |

<div style="height: 2.0em;"></div>

 * Columnar, chunked store
 * Flexible data types in-memory and on-disk
 * Hyperslab and boolean indexing
 * Fine-grained key/val metadata
 * Groups & hierarchies
 * Extensible types:
   * Numeric
   * Fixed-length strings
   * Variable strings

---

<br>
<br>
<br>

# Doing Stuff with Data

Now that we understand a few ways that data can be stored, let's do some things
to it.

---

<div class="left">

![](/is445_obuobg_spring2025/week02/images/palette.jpg)

<!-- .element: style="height: 20em;" -->
</div>

<div class="right" style="font-size: 150%;">
<div style="height: 4.0em;"></div>
In the abstract: You have a palette of operations to apply.
</div>

---

## Filtering Operations

 * Relationships:
   * Equality, inequality
   * Quantitative value (less than, greater than)
   * Intersection, disjoint
 * Subsampling
   * Regular sampling
   * Randomized sampling
   * Nyquist frequency
 * Related data queries
   * Queries on other columns at fixed row location
   * External membership queries

---

## Relationships Examples

 * Equality
   * Identity
   * Quantitative values
 * Ordering or quantitative
   * Less than (or equal)
   * Greater than (or equal)
   * "Comes before" and "Comes after"
 * Set-based operations
   * "Is a member"
   * "Is not a member"
   * "Shares members"
   * "Shares no members"

---

## Examples

### Equality

```
value == "hello"
value == 10
```

### Ordering and Quantitative

```
value < 30
value > July 1, 2010
```

### Set-Based

```
value in ("red", "blue")
value not in (3.141, 2.7)
```

---

## Sampling

We can choose a subset of points and use those to explore our data.  This is
not without its possible faults, however.

---

<!-- .slide: data-background-image="images/sampling_fig1.png" data-background-size="contain" -->

---

<!-- .slide: data-background-image="images/sampling_fig2.png" data-background-size="contain" -->

---

<!-- .slide: data-background-image="images/sampling_fig3.png" data-background-size="contain" -->

notes:
We might preserve the shape better by alternate sampling methods. These random samplings preserve features that the uniform samplings lost - but they also lose features that the uniform sampling preserved.

---

<!-- .slide: data-background-image="images/sampling_fig4.png" data-background-size="contain" -->

notes:
You'll also notice that high rates of change are more susceptible to data loss. A better sampling algorithm would target these fast changing regions.

---

<!-- .slide: data-background-image="images/sampling_fig5.png" data-background-size="contain" -->

notes:
the Nyquist limit is the minimum rate at which a signal can be sampled without introducing errors - 2x the highest frequency in the data.

You can see that in this higher frequency data, the same sampling rates fall apart faster.

---

<!-- .slide: data-background-image="images/sampling_fig6.png" data-background-size="contain" -->

---

<!-- .slide: data-background-image="images/teapots.png" data-background-size="contain" -->

---

## Let's try some stuff in Python with tabular data and Pandas!

---


          </script>
        </section>
      </div>
    </div>
<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        fragments: true,
        fragmentInURL: true,
        hash: true,
        width: 1024,
        height: 768,
        margin: 0.02,
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath],
        dependencies: [
            { src: 'https://cdn.jsdelivr.net/npm/reveald3@1.5.5/reveald3.js'}
        ],
		keyboard: {
		},
        center: false,
        transition: 'none',
        backgroundTransition: 'none',
        reveald3: {
            runLastState: false
        }
    });
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js" ></script>


  </body>
</html>

